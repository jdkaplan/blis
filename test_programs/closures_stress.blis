func main() {
    func outer(x) {
        print("outer");

        func middle(name) {
            print("middle", name);

            func inner() {
                print("inner", name);
                print(x);
                x = x + 1;
                print(x);
                print("-----");
            }

            inner
        }

        middle
    }

    let middle = outer(0);
    let inner1 = middle("first");
    inner1();
    inner1();

    let inner2 = middle("second");
    inner2();

    middle = nil;

    inner1();
    inner1 = nil;

    inner2();
    inner2 = nil;
}

main();
